<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Referência da API - Trace Point</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav class="navbar">
        <div class="logo"><h1>Trace Point API</h1></div>
        <button class="hamburger-menu" id="hamburgerMenu" aria-label="Toggle navigation" aria-expanded="false">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </button>
        <div class="nav-links" id="navLinks">
            <div class="sidebar-header">
                <h1>Trace Point API</h1>
            </div>
            <ul>
                <li><a href="index.html">Visão Geral</a></li>
                <li><a href="instalacao.html">Instalação</a></li>
                <li><a href="autenticacao_usuarios.html">Usuários & Acesso</a></li>
                <li><a href="api_referencia.html">API Referência</a></li>
                <li><a href="estrutura_projeto.html">Estrutura do Projeto</a></li> 
                <li><a href="dependencias_tecnologias.html">Dependências</a></li>
                <li><a href="modelo_relacional.html">Modelo Relacional</a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <header class="page-header">
            <h1 class="project-title">7. Endpoints da API</h1>
        </header>

        <section id="auth-endpoints">
            <h3>7.1. Autenticação (<code>/auth</code>)</h3>
            <table>
                <thead>
                    <tr>
                        <th>Método</th>
                        <th>Rota</th>
                        <th>Proteção JWT</th>
                        <th>Descrição</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>POST</code></td>
                        <td><code>/auth/login</code></td>
                        <td>Não</td>
                        <td>Login de usuário.</td>
                    </tr>
                    <tr>
                        <td><code>POST</code></td>
                        <td><code>/auth/refresh</code></td>
                        <td>Não </td>
                        <td>Atualização de token. </td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section id="user-endpoints">
            <h3>7.2. Usuários (<code>/user</code>)</h3>
            <table>
                <thead>
                    <tr>
                        <th>Método</th>
                        <th>Rota</th>
                        <th>Proteção JWT</th>
                        <th>Acesso</th>
                        </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>POST</code></td>
                        <td><code>/user/register</code></td>
                        <td>Não </td>
                        <td>Público </td>
                    </tr>
                    <tr>
                        <td><code>POST</code></td>
                        <td><code>/user/booking</code></td>
                        <td>Sim</td>
                        <td>Visitor, Organizer, Admin </td>
                    </tr>
                    <tr>
                        <td><code>GET</code></td>
                        <td><code>/user/</code></td>
                        <td>Sim</td>
                        <td>Admin </td>
                    </tr>
                    <tr>
                        <td><code>GET</code></td>
                        <td><code>/user/:id</code></td>
                        <td>Sim</td>
                        <td>Admin </td>
                    </tr>
                    <tr>
                        <td><code>PUT</code></td>
                        <td><code>/user/:id</code></td>
                        <td>Sim</td>
                        <td>Todos (restrito ao próprio usuário ou Admin) </td>
                    </tr>
                    <tr>
                        <td><code>DELETE</code></td>
                        <td><code>/user/:id</code></td>
                        <td>Sim </td>
                        <td>Admin </td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section id="place-endpoints">
            <h3>7.3. Locais (<code>/place</code>) </h3>
            <table>
                <thead>
                    <tr>
                        <th>Método</th>
                        <th>Rota</th>
                        <th>Proteção JWT</th>
                        <th>Acesso</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>POST</code></td>
                        <td><code>/place/</code></td>
                        <td>Sim</td>
                        <td>Organizer, Admin </td>
                    </tr>
                    <tr>
                        <td><code>GET</code></td>
                        <td><code>/place/</code></td>
                        <td>Sim </td>
                        <td>Todos </td>
                    </tr>
                    <tr>
                        <td><code>GET</code></td>
                        <td><code>/place/:id</code></td>
                        <td>Sim </td>
                        <td>Todos </td>
                    </tr>
                    <tr>
                        <td><code>PUT</code></td>
                        <td><code>/place/:id</code></td>
                        <td>Sim</td>
                        <td>Organizer, Admin </td>
                    </tr>
                    <tr>
                        <td><code>DELETE</code></td>
                        <td><code>/place/:id</code></td>
                        <td>Sim </td>
                        <td>Admin </td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section id="event-endpoints">
            <h3>7.4. Eventos (<code>/event</code>) </h3>
            <table>
                <thead>
                    <tr>
                        <th>Método</th>
                        <th>Rota</th>
                        <th>Proteção JWT</th>
                        <th>Acesso</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>POST</code></td>
                        <td><code>/event/</code></td>
                        <td>Sim</td>
                        <td>Organizer, Admin</td>
                    </tr>
                    <tr>
                        <td><code>GET</code></td>
                        <td><code>/event/</code></td>
                        <td>Sim </td>
                        <td>Todos </td>
                    </tr>
                    <tr>
                        <td><code>GET</code></td>
                        <td><code>/event/:id</code></td>
                        <td>Sim </td>
                        <td>Todos </td>
                    </tr>
                    <tr>
                        <td><code>PUT</code></td>
                        <td><code>/event/:id</code></td>
                        <td>Sim</td>
                        <td>Organizer, Admin </td>
                    </tr>
                    <tr>
                        <td><code>DELETE</code></td>
                        <td><code>/event/:id</code></td>
                        <td>Sim </td>
                        <td>Organizer, Admin </td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section id="visited-endpoints">
            <h3>7.5. Visitas Realizadas (<code>/visited</code>)</h3>
            <table>
                <thead>
                    <tr>
                        <th>Método</th>
                        <th>Rota</th>
                        <th>Proteção JWT</th>
                        <th>Acesso</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>POST</code></td>
                        <td><code>/visited/</code></td>
                        <td>Sim </td>
                        <td>Todos </td>
                    </tr>
                    <tr>
                        <td><code>GET</code></td>
                        <td><code>/visited/</code></td>
                        <td>Sim </td>
                        <td>Todos (Admin vê tudo) </td>
                    </tr>
                    <tr>
                        <td><code>GET</code></td>
                        <td><code>/visited/user/:id</code></td>
                        <td>Sim </td>
                        <td>Visitor/Admin/Organizer </td>
                    </tr>
                    <tr>
                        <td><code>GET</code></td>
                        <td><code>/visited/place/:id</code></td>
                        <td>Sim </td>
                        <td>Todos </td>
                    </tr>
                    <tr>
                        <td><code>PUT</code></td>
                        <td><code>/visited/</code></td>
                        <td>Sim </td>
                        <td>Todos</td>
                    </tr>
                    <tr>
                        <td><code>DELETE</code></td>
                        <td><code>/visited/</code></td>
                        <td>Sim </td>
                        <td>Organizer, Admin </td>
                    </tr>
                </tbody>
            </table>
        </section>

<hr class="section-divider">

        <section id="exemplos-requisicoes">
            <h2><span class="section-number">8.</span> Exemplos de Requisição (Corpo JSON)</h2>
            <p>Abaixo estão exemplos de corpos de requisição JSON esperados para algumas das principais operações de criação e atualização da API. O método HTTP e a rota estão indicados no título de cada exemplo.</p>

            <h3><span class="section-number">8.1.</span> Login de Usuário (<code>POST /auth/login</code>)</h3>
            <p>Utiliza <code>LoginInfoDTO</code> para autenticar um usuário.</p>
            <pre><code>Content-Type: application/json

{
  "email": "usuario@example.com",
  "password": "senhaSegura123"
}</code></pre>

            <h3><span class="section-number">8.2.</span> Registrar Novo Usuário (<code>POST /user/register</code>)</h3>
            <p>Utiliza <code>UserDTO</code> para criar um novo usuário (visitor ou organizer).</p>
            <pre><code>Content-Type: application/json

{
  "name": "Nome Completo do Novo Usuário",
  "userLogin": {
    "email": "novo.usuario@example.com",
    "password": "outraSenhaSegura456"
  },
  "profilePick": "https://example.com/perfil.jpg",
  "role": "visitor" 
}</code></pre>

            <h3><span class="section-number">8.3.</span> Atualizar Usuário (<code>PUT /user/:id</code>)</h3>
            <p>Utiliza <code>UserDTO</code> para atualizar os dados de um usuário existente. Substitua <code>:id</code> no título da rota pelo ID do usuário.</p>
            <pre><code>Content-Type: application/json

{
  "name": "Nome Atualizado do Usuário",
  "userLogin": {
    "email": "usuario.atualizado@example.com",
    "password": "novaSenhaSuperSegura789"
  },
  "profilePick": "https://example.com/nova_perfil.jpg",
  "role": "organizer"
}</code></pre>

            <h3><span class="section-number">8.4.</span> Criar Local (<code>POST /place/</code>)</h3>
            <p>Utiliza <code>PlaceDTO</code> para registrar um novo local.</p>
            <pre><code>Content-Type: application/json

{
  "name": "Estação das Docas",
  "type": "cultural",
  "address": {
    "postalCode": "66010-020",
    "street": "Av. Boulevard Castilhos França",
    "numberHouse": 600,
    "complement": "Armazém 2"
  }
}</code></pre>

            <h3><span class="section-number">8.5.</span> Atualizar Local (<code>PUT /place/:id</code>)</h3>
            <p>Utiliza <code>PlaceDTO</code> para atualizar um local existente. Substitua <code>:id</code> no título da rota pelo ID do local.</p>
            <pre><code>Content-Type: application/json

{
  "name": "Mercado Ver-o-Peso Renovado",
  "type": "market",
  "address": {
    "postalCode": "66010-030",
    "street": "Av. Boulevard Castilhos França",
    "numberHouse": 100,
    "complement": "Setor Peixes"
  }
}</code></pre>

            <h3><span class="section-number">8.6.</span> Criar Evento (<code>POST /event/</code>)</h3>
            <p>Utiliza <code>EventDTO</code> para criar um novo evento.</p>
            <pre><code>Content-Type: application/json

{
  "title": "Festival Gastronômico Amazônico",
  "eventDate": "2025-11-10T18:00:00.000Z",
  "description": "Uma celebração dos sabores únicos da Amazônia na COP-30.",
  "place": "UUID-do-local-EstacaoDasDocas"
}</code></pre>

            <h3><span class="section-number">8.7.</span> Atualizar Evento (<code>PUT /event/:id</code>)</h3>
            <p>Utiliza <code>EventDTO</code> para atualizar um evento existente. Substitua <code>:id</code> no título da rota pelo ID do evento.</p>
            <pre><code>Content-Type: application/json

{
  "title": "Festival Gastronômico Amazônico (Edição Especial COP-30)",
  "eventDate": "2025-11-12T19:00:00.000Z",
  "description": "Edição especial do festival, com foco em sustentabilidade e culinária local.",
  "place": "UUID-do-local-EstacaoDasDocas"
}</code></pre>
            
            <h3><span class="section-number">8.8.</span> Agendar Visita em Evento (<code>POST /user/booking</code>)</h3>
            <p>Utiliza <code>BookingDTO</code> para que um usuário se inscreva em um evento.</p>
            <pre><code>Content-Type: application/json

{
  "eventId": "UUID-do-evento-FestivalAmazonico",
  "userId": "UUID-do-usuario-Visitante"
}</code></pre>

            <h3><span class="section-number">8.9.</span> Registrar Visita a um Local (<code>POST /visited/</code>)</h3>
            <p>Utiliza <code>VisitedDTO</code> para marcar um local como visitado por um usuário em uma data específica.</p>
            <pre><code>Content-Type: application/json

{
  "userId": "UUID-do-usuario-Visitante",
  "placeId": "UUID-do-local-VerOPeso",
  "visitDate": "2025-10-20T10:30:00.000Z"
}</code></pre>

            <h3><span class="section-number">8.10.</span> Atualizar Registro de Visita (<code>PUT /visited/</code>)</h3>
            <p>Utiliza <code>VisitedDTO</code> para atualizar a data de uma visita existente. A visita é identificada pela combinação de <code>userId</code> e <code>placeId</code> no corpo da requisição.</p>
            <pre><code>Content-Type: application/json

{
  "userId": "UUID-do-usuario-Visitante",
  "placeId": "UUID-do-local-VerOPeso",
  "visitDate": "2025-10-20T11:00:00.000Z" 
}</code></pre>
        </section>
        <hr class="section-divider">

        <section id="navegacao">
            <p style="text-align: center; margin-top: 25px;">
                <a href="index.html" class="button-link">Voltar para Visão Geral</a>
                <a href="estrutura_projeto.html" class="button-link">Estrutura do Projeto e DER</a>
                <a href="autenticacao_usuarios.html" class="button-link">Usuários e Autenticação</a>
            </p>
        </section>

        <footer>
            <p>Trace Point API &copy; 2025</p>
            <p><a href="https://github.com/vyctor-carvalho/Trace_Point" target="_blank" rel="noopener noreferrer">Ver Projeto no GitHub</a></p>
        </footer>

        <script src="script.js"></script>

    </div>
</body>
</html>